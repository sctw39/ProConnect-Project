<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProConnect - My Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0078D4',
                        primaryLight: '#50A0E4',
                        primaryDark: '#106EBE',
                        secondary: '#2BC48A',
                        accent: '#FFB900',
                        danger: '#E74C3C',
                        success: '#27AE60',
                        lightBg: '#FFFFFF',
                        lightSecondary: '#F8F9FA',
                        lightTertiary: '#E9ECEF',
                        textDark: '#212529',
                        textMedium: '#495057',
                        textLight: '#6C757D'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-lightBg text-textDark min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-md pb-20">
        <!-- App Header -->
        <header class="flex justify-between items-center mb-6">
            <a href="index.html" id="backLink" class="text-primary">
                <i class="fas fa-arrow-left text-xl"></i>
            </a>
            <h1 class="text-xl font-bold text-primary">My Profile</h1>
            <button id="settingsBtn" class="text-primary">
                <i class="fas fa-cog text-xl"></i>
            </button>
        </header>

        <!-- Profile Banner & Avatar -->
        <div class="relative mb-20">
            <div class="h-40 bg-gradient-to-r from-primary to-primaryLight rounded-t-lg"></div>
            <div class="absolute left-1/2 transform -translate-x-1/2 -bottom-16 flex flex-col items-center">
                <div class="w-32 h-32 rounded-full border-4 border-white overflow-hidden bg-gray-200">
                    <img id="profileImage" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=200&q=80" class="w-full h-full object-cover" alt="Profile photo">
                </div>
                <div class="mt-2 text-center">
                    <h2 id="fullName" class="text-xl font-bold">Alex Johnson</h2>
                    <p id="titleCompany" class="text-textMedium">Product Manager at TechCorp</p>
                </div>
            </div>
        </div>

        <!-- Profile Content -->
        <div class="mt-6">
            <!-- Profile Stats -->
            <div class="flex justify-around bg-lightSecondary p-4 rounded-lg mb-6">
                <div class="text-center">
                    <div id="connectionCount" class="text-xl font-bold text-primary">142</div>
                    <div class="text-xs text-textMedium">Connections</div>
                </div>
                <div class="text-center">
                    <div id="expertiseScore" class="text-xl font-bold text-primary">78</div>
                    <div class="text-xs text-textMedium">Expertise Score</div>
                </div>
                <div class="text-center">
                    <div id="endorsementCount" class="text-xl font-bold text-primary">23</div>
                    <div class="text-xs text-textMedium">Endorsements</div>
                </div>
            </div>

            <!-- About Section -->
            <div class="bg-lightSecondary p-4 rounded-lg mb-6">
                <h3 class="font-semibold mb-2">About</h3>
                <p id="aboutText" class="text-sm text-textMedium">
                    Product manager with 8+ years of experience in technology companies. Passionate about creating user-centric solutions that solve real problems. Currently focused on AI-powered healthcare applications.
                </p>
            </div>

            <!-- Skills Section -->
            <div class="bg-lightSecondary p-4 rounded-lg mb-6">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="font-semibold">Skills</h3>
                    <a href="index.html#skillsScreen" class="text-primary text-sm">View All</a>
                </div>
                <div id="skillsContainer" class="flex flex-wrap gap-2">
                    <!-- Skills will be populated by JavaScript -->
                </div>
            </div>

            <!-- Experience Section -->
            <div class="bg-lightSecondary p-4 rounded-lg mb-6">
                <h3 class="font-semibold mb-2">Experience</h3>
                <div id="experienceContainer" class="space-y-3">
                    <!-- Experience will be populated by JavaScript -->
                </div>
            </div>

            <!-- Looking For Section -->
            <div class="bg-gradient-to-r from-primary to-primaryLight text-white p-4 rounded-lg mb-6">
                <h3 class="font-semibold mb-2">Looking For</h3>
                <div id="lookingForContainer" class="space-y-2">
                    <!-- Looking For items will be populated by JavaScript -->
                </div>
            </div>

            <!-- Activity Feed Preview -->
            <div class="bg-lightSecondary p-4 rounded-lg">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="font-semibold">Recent Activity</h3>
                    <a href="#" class="text-primary text-sm">View All</a>
                </div>
                <div class="space-y-3">
                    <div class="flex items-start">
                        <div class="w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center mr-3 flex-shrink-0">
                            <i class="fas fa-certificate text-primary"></i>
                        </div>
                        <div>
                            <p class="text-sm">You were endorsed for <span class="font-medium">Product Management</span> by <span class="text-primary">Sarah Chen</span></p>
                            <p class="text-xs text-textMedium">2 days ago</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center mr-3 flex-shrink-0">
                            <i class="fas fa-user-plus text-primary"></i>
                        </div>
                        <div>
                            <p class="text-sm">You connected with <span class="text-primary">David Wong</span></p>
                            <p class="text-xs text-textMedium">5 days ago</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Profile Button -->
        <div class="fixed bottom-24 left-0 right-0 flex justify-center z-10">
            <button id="editProfileBtn" class="bg-primary hover:bg-primaryDark text-white font-semibold py-2 px-6 rounded-lg shadow-lg transition">
                Edit Profile
            </button>
        </div>

        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 left-0 right-0 bg-white border-t p-3 flex justify-around">
            <a href="index.html" class="text-textLight flex flex-col items-center">
                <i class="fas fa-home text-xl"></i>
                <span class="text-xs mt-1">Home</span>
            </a>
            <a href="chat.html" class="text-textLight flex flex-col items-center">
                <i class="fas fa-comments text-xl"></i>
                <span class="text-xs mt-1">Chat</span>
            </a>
            <a href="search.html" class="text-textLight flex flex-col items-center">
                <i class="fas fa-search text-xl"></i>
                <span class="text-xs mt-1">Search</span>
            </a>
            <a href="profile.html" class="text-primary flex flex-col items-center">
                <i class="fas fa-user text-xl"></i>
                <span class="text-xs mt-1">Profile</span>
            </a>
        </nav>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in, if not, redirect to login page
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (!currentUser) {
                // Get the base URL for proper path resolution
                const baseUrl = window.location.href.substring(0, window.location.href.lastIndexOf('/') + 1);
                window.location.href = baseUrl + "index.html";
                return;
            }
            
            // Populate profile data
            document.getElementById('fullName').textContent = currentUser.fullName || 'Alex Johnson';
            document.getElementById('titleCompany').textContent = `${currentUser.currentRole || 'Product Manager'} at ${currentUser.company || 'TechCorp'}`;
            
            if (currentUser.profileImage) {
                document.getElementById('profileImage').src = currentUser.profileImage;
            }
            
            // Set connection, expertise, and endorsement counts
            document.getElementById('connectionCount').textContent = currentUser.networkSize || '142';
            document.getElementById('expertiseScore').textContent = currentUser.expertiseScore || '78';
            document.getElementById('endorsementCount').textContent = currentUser.endorsements || '23';
            
            // Set about text
            document.getElementById('aboutText').textContent = currentUser.about || 'Product manager with 8+ years of experience in technology companies.';
            
            // Populate skills
            const skillsContainer = document.getElementById('skillsContainer');
            let skills = [];
            
            if (typeof currentUser.skills === 'string') {
                skills = currentUser.skills.split(',').map(skill => skill.trim());
            } else if (Array.isArray(currentUser.skills)) {
                skills = currentUser.skills;
            } else {
                skills = ['Product Management', 'User Research', 'Data Analysis', 'Strategic Planning', 'Team Leadership'];
            }
            
            skillsContainer.innerHTML = '';
            skills.forEach(skill => {
                const skillSpan = document.createElement('span');
                skillSpan.className = 'bg-primary/10 text-primary px-2 py-1 rounded-full text-xs';
                skillSpan.textContent = skill;
                skillsContainer.appendChild(skillSpan);
            });
            
            // Populate experience
            const experienceContainer = document.getElementById('experienceContainer');
            const experience = currentUser.experience || [
                {
                    title: "Product Manager",
                    company: "TechCorp",
                    period: "2019 - Present",
                    description: "Leading product development for healthcare AI solutions"
                },
                {
                    title: "Senior Product Analyst",
                    company: "Innovate Inc",
                    period: "2016 - 2019",
                    description: "Data-driven product strategy and roadmap development"
                }
            ];
            
            experienceContainer.innerHTML = '';
            experience.forEach(exp => {
                const expDiv = document.createElement('div');
                expDiv.className = 'flex';
                expDiv.innerHTML = `
                    <div class="w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center mr-3 flex-shrink-0">
                        <i class="fas fa-building text-primary"></i>
                    </div>
                    <div>
                        <h4 class="font-medium">${exp.title}</h4>
                        <p class="text-sm text-textMedium">${exp.company} • ${exp.period}</p>
                        <p class="text-xs text-textMedium mt-1">${exp.description}</p>
                    </div>
                `;
                experienceContainer.appendChild(expDiv);
            });
            
            // Populate looking for
            const lookingForContainer = document.getElementById('lookingForContainer');
            const lookingFor = currentUser.lookingFor || [
                "Technical co-founder for healthcare startup",
                "Mentorship opportunities with junior PMs",
                "Consulting projects in healthcare technology"
            ];
            
            lookingForContainer.innerHTML = '';
            lookingFor.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'flex items-center';
                itemDiv.innerHTML = `
                    <i class="fas fa-search mr-2"></i>
                    <span class="text-sm">${item}</span>
                `;
                lookingForContainer.appendChild(itemDiv);
            });
            
            // Settings button functionality
            document.getElementById('settingsBtn').addEventListener('click', function() {
                alert('Settings functionality will be available soon.');
            });

            // Edit profile button
            document.getElementById('editProfileBtn').addEventListener('click', function() {
                alert('Profile editing functionality will be available soon.');
            });
            
            // Update back link to point to home page if user is logged in
            document.getElementById('backLink').href = "index.html";
        });
    </script>
</body>
</html>
