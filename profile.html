<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProConnect - Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0078D4',
                        primaryLight: '#50A0E4',
                        primaryDark: '#106EBE',
                        secondary: '#2BC48A',
                        accent: '#FFB900',
                        danger: '#E74C3C',
                        success: '#27AE60',
                        lightBg: '#FFFFFF',
                        lightSecondary: '#F8F9FA',
                        lightTertiary: '#E9ECEF',
                        textDark: '#212529',
                        textMedium: '#495057',
                        textLight: '#6C757D',
                        darkBg: '#181818',
                        darkSecondary: '#202020',
                        darkTertiary: '#2A2A2A'
                    }
                }
            },
            darkMode: 'class'
        }
        
        // Force dark mode
        document.documentElement.classList.add('dark');
    </script>
    <style>
        /* Profile image styles */
        .profile-image-container {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto;
        }
        
        .profile-image {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #202020;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        .edit-icon {
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 32px;
            height: 32px;
            background-color: #0078D4;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .edit-icon:hover {
            background-color: #106EBE;
        }
        
        /* Progress indicators */
        .profile-progress-track {
            height: 4px;
            background-color: #333333;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .profile-progress-bar {
            height: 100%;
            background-color: #0078D4;
            border-radius: 2px;
            transition: width 0.5s ease;
        }
        
        /* Section animations */
        .section-card {
            transition: transform 0.3s, box-shadow 0.3s;
            background-color: #202020 !important;
        }
        
        .section-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
        }
        
        /* Skill badge styling */
        .skill-badge {
            display: inline-block;
            background-color: rgba(0, 120, 212, 0.2);
            color: #0078D4;
            border-radius: 50px;
            padding: 4px 10px;
            font-size: 0.75rem;
            margin-right: 6px;
            margin-bottom: 6px;
            white-space: nowrap;
        }
        
        /* Edit form animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s forwards;
        }
        
        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        /* Empty state animation */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite ease-in-out;
        }
        
        /* Profile completion check animation */
        @keyframes checkmark {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .check-animation {
            animation: checkmark 0.5s forwards;
        }
        
        /* Edit profile panel animation */
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); }
            to { transform: translateX(100%); }
        }
        
        .slide-in {
            animation: slideIn 0.3s forwards;
        }
        
        .slide-out {
            animation: slideOut 0.3s forwards;
        }
        
        /* Image preview */
        .image-preview {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #202020;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            margin: 0 auto;
            display: block;
        }
        
        /* Custom file input */
        .file-input-container {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }
        
        .file-input {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        /* Sign out modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
        
        .modal-content {
            background-color: #202020;
            padding: 1.5rem;
            border-radius: 0.5rem;
            max-width: 400px;
            width: 90%;
        }
        
        /* Button styles */
        .btn {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            20% {
                transform: scale(25, 25);
                opacity: 0.3;
            }
            100% {
                opacity: 0;
                transform: scale(40, 40);
            }
        }
        
        /* Notification badge */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #E74C3C;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* General dark mode styling */
        body {
            background-color: #181818 !important;
            color: #F8F9FA !important;
        }
        
        .bg-white, .bg-lightSecondary, .bg-lightBg {
            background-color: #202020 !important;
        }
        
        .bg-lightTertiary {
            background-color: #2A2A2A !important;
        }
        
        .text-textDark {
            color: #F8F9FA !important;
        }
        
        .text-textMedium {
            color: #CED4DA !important;
        }
        
        .border-gray-200, .border-gray-300 {
            border-color: #2A2A2A !important;
        }
        
        input, textarea, select {
            background-color: #2A2A2A !important;
            border-color: #3A3A3A !important;
            color: #E9ECEF !important;
        }
        
        input::placeholder, textarea::placeholder {
            color: #6C757D !important;
        }
        
        /* Bottom navigation */
        .bottom-nav {
            background-color: #202020 !important;
            border-color: #2A2A2A !important;
        }
        
        .nav-icon {
            color: #6C757D !important;
        }
        
        .nav-icon.active {
            color: #0078D4 !important;
        }
    </style>
</head>
<body class="dark:bg-darkBg text-textDark min-h-screen">
    <div class="container mx-auto px-4 py-6 max-w-md pb-20">
        <!-- App Header -->
        <header class="flex justify-between items-center mb-6">
            <h1 class="text-xl font-bold text-primary">Profile</h1>
            <div class="flex items-center">
                <a href="settings.html" id="settingsBtn" class="text-primary mr-2 block p-2 hover:bg-darkTertiary rounded-full transition">
                    <i class="fas fa-cog text-xl"></i>
                </a>
                <a href="notifications.html" id="notificationsBtn" class="text-primary mr-2 block p-2 hover:bg-darkTertiary rounded-full transition relative">
                    <i class="fas fa-bell text-xl"></i>
                    <span id="notificationBadge" class="notification-badge hidden">0</span>
                </a>
                <button id="shareProfileBtn" class="text-primary block p-2 hover:bg-darkTertiary rounded-full transition">
                    <i class="fas fa-share-alt text-xl"></i>
                </button>
            </div>
        </header>
        
        <!-- Authentication Check -->
        <div id="authCheck" class="hidden flex flex-col items-center justify-center py-8">
            <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4">
                <i class="fas fa-lock text-primary text-2xl"></i>
            </div>
            <h3 class="text-lg font-semibold mb-2 text-white">Sign in to view your profile</h3>
            <p class="text-gray-300 mb-4 text-center">Please sign in or create an account to build your professional profile</p>
            <div class="flex space-x-4">
                <a href="login.html" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-primaryDark transition duration-300">
                    Sign In
                </a>
                <a href="login.html" class="bg-darkTertiary text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition duration-300">
                    Sign Up
                </a>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="hidden">
            <div class="flex justify-center mb-6">
                <div class="w-24 h-24 rounded-full bg-gray-800 animate-pulse"></div>
            </div>
            <div class="bg-darkSecondary rounded-lg p-4 shadow-sm mb-6 animate-pulse">
                <div class="h-6 bg-darkTertiary rounded mb-3 w-3/4"></div>
                <div class="h-4 bg-darkTertiary rounded mb-2 w-1/2"></div>
                <div class="h-4 bg-darkTertiary rounded w-full"></div>
            </div>
            <div class="space-y-4">
                <div class="bg-darkSecondary rounded-lg p-4 shadow-sm animate-pulse">
                    <div class="h-5 bg-darkTertiary rounded mb-3 w-1/3"></div>
                    <div class="h-4 bg-darkTertiary rounded mb-2 w-full"></div>
                    <div class="h-4 bg-darkTertiary rounded mb-2 w-full"></div>
                    <div class="h-4 bg-darkTertiary rounded w-3/4"></div>
                </div>
                <div class="bg-darkSecondary rounded-lg p-4 shadow-sm animate-pulse">
                    <div class="h-5 bg-darkTertiary rounded mb-3 w-1/3"></div>
                    <div class="h-4 bg-darkTertiary rounded mb-2 w-full"></div>
                    <div class="h-4 bg-darkTertiary rounded mb-2 w-full"></div>
                </div>
            </div>
        </div>

        <!-- Main Profile Content -->
        <div id="profileContent" class="hidden">
            <!-- Profile Header -->
            <div class="flex flex-col items-center mb-6">
                <div class="profile-image-container mb-3">
                    <img id="profileImage" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=200&q=80" alt="Profile photo" class="profile-image">
                    <div id="editProfileImageBtn" class="edit-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                </div>
                <h2 id="profileName" class="text-xl font-bold mb-1 text-white">John Doe</h2>
                <p id="profileTitle" class="text-gray-300 mb-2">Product Manager at TechCorp</p>
                <p id="profileLocation" class="text-gray-300 text-sm mb-3"><i class="fas fa-map-marker-alt mr-1"></i>New York, NY</p>
                
                <!-- Profile Completeness -->
                <div class="w-full max-w-xs mb-2">
                    <div class="flex justify-between text-xs mb-1">
                        <span class="text-gray-400">Profile Completeness</span>
                        <span id="profileCompletionPercent" class="text-primary font-medium">70%</span>
                    </div>
                    <div class="profile-progress-track">
                        <div id="profileCompletionBar" class="profile-progress-bar" style="width: 70%"></div>
                    </div>
                </div>
                <p id="profileCompletionHint" class="text-xs text-gray-400 mb-3">Add your skills to improve your profile</p>
                
                <!-- Quick Action Buttons -->
                <div class="flex space-x-3">
                    <button id="editProfileBtn" class="bg-primary text-white px-4 py-2 rounded-lg flex items-center btn hover:bg-primaryDark transition duration-300">
                        <i class="fas fa-pen mr-2"></i> Edit Profile
                    </button>
                    <a href="search.html" class="bg-darkTertiary text-white px-4 py-2 rounded-lg btn hover:bg-gray-700 transition duration-300 flex items-center">
                        <i class="fas fa-search mr-2"></i> Find People
                    </a>
                </div>
            </div>
            
            <!-- About Section -->
            <div class="bg-darkSecondary rounded-lg p-4 mb-4 shadow-sm section-card">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="font-medium text-white">About</h3>
                    <button class="edit-section-btn text-primary hover:bg-darkTertiary p-1 rounded-full transition" data-section="about">
                        <i class="fas fa-pen"></i>
                    </button>
                </div>
                <p id="aboutContent" class="text-gray-300 text-sm">Experienced Product Manager with a passion for creating user-centered solutions. I specialize in agile methodologies and have a track record of launching successful products that deliver business value while meeting user needs.</p>
                
                <!-- About Edit Form (Hidden initially) -->
                <div id="aboutEditForm" class="hidden mt-3">
                    <textarea id="aboutTextarea" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary resize-none text-sm bg-darkTertiary border-darkTertiary" rows="5" placeholder="Tell people about yourself, your experience, and what you're looking for"></textarea>
                    <div class="flex justify-end mt-2 space-x-2">
                        <button class="cancel-edit-btn px-3 py-1 text-sm text-gray-300 hover:bg-darkTertiary rounded transition">Cancel</button>
                        <button class="save-edit-btn px-3 py-1 bg-primary text-white text-sm rounded-lg hover:bg-primaryDark transition" data-section="about">Save</button>
                    </div>
                </div>
            </div>
            
            <!-- Experience Section -->
            <div class="bg-darkSecondary rounded-lg p-4 mb-4 shadow-sm section-card">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="font-medium text-white">Experience</h3>
                    <button class="edit-section-btn text-primary hover:bg-darkTertiary p-1 rounded-full transition" data-section="experience">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div id="experienceList">
                    <div class="mb-3 pb-3 border-b border-darkTertiary">
                        <h4 class="font-medium text-white">Product Manager</h4>
                        <p class="text-gray-300 text-sm">TechCorp</p>
                        <p class="text-gray-400 text-xs">Jan 2020 - Present</p>
                    </div>
                    <div>
                        <h4 class="font-medium text-white">Associate Product Manager</h4>
                        <p class="text-gray-300 text-sm">StartupInc</p>
                        <p class="text-gray-400 text-xs">Mar 2018 - Dec 2019</p>
                    </div>
                </div>
                
                <!-- Experience Edit Form (Hidden initially) -->
                <div id="experienceEditForm" class="hidden mt-3 fade-in">
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium mb-1 text-white">Title</label>
                            <input type="text" id="expTitleInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm bg-darkTertiary border-darkTertiary" placeholder="e.g. Product Manager">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1 text-white">Company</label>
                            <input type="text" id="expCompanyInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm bg-darkTertiary border-darkTertiary" placeholder="e.g. TechCorp">
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <label class="block text-sm font-medium mb-1 text-white">Start Date</label>
                                <input type="month" id="expStartInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm bg-darkTertiary border-darkTertiary">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1 text-white">End Date</label>
                                <input type="month" id="expEndInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm bg-darkTertiary border-darkTertiary">
                                <div class="flex items-center mt-1">
                                    <input type="checkbox" id="expCurrentInput" class="mr-1">
                                    <label for="expCurrentInput" class="text-xs text-gray-300">Current position</label>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1 text-white">Description</label>
                            <textarea id="expDescriptionInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm resize-none bg-darkTertiary border-darkTertiary" rows="3" placeholder="Describe your responsibilities and achievements"></textarea>
                        </div>
                    </div>
                    <div class="flex justify-end mt-3 space-x-2">
                        <button class="cancel-edit-btn px-3 py-1 text-sm text-gray-300 hover:bg-darkTertiary rounded transition">Cancel</button>
                        <button class="save-edit-btn px-3 py-1 bg-primary text-white text-sm rounded-lg hover:bg-primaryDark transition" data-section="experience">Save</button>
                    </div>
                </div>
            </div>
            
            <!-- Skills Section -->
            <div class="bg-darkSecondary rounded-lg p-4 mb-4 shadow-sm section-card">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="font-medium text-white">Skills</h3>
                    <button class="edit-section-btn text-primary hover:bg-darkTertiary p-1 rounded-full transition" data-section="skills">
                        <i class="fas fa-pen"></i>
                    </button>
                </div>
                <div id="skillsList" class="flex flex-wrap">
                    <span class="skill-badge">Product Management</span>
                    <span class="skill-badge">User Research</span>
                    <span class="skill-badge">Agile</span>
                    <span class="skill-badge">Market Analysis</span>
                    <span class="skill-badge">Strategy</span>
                </div>
                
                <!-- Skills Edit Form (Hidden initially) -->
                <div id="skillsEditForm" class="hidden mt-3">
                    <input type="text" id="skillsInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm bg-darkTertiary border-darkTertiary" placeholder="Add skills (comma separated)">
                    <p class="text-xs text-gray-400 mt-1">Enter skills separated by commas, e.g. "Product Management, Agile, UX Design"</p>
                    <div class="flex justify-end mt-2 space-x-2">
                        <button class="cancel-edit-btn px-3 py-1 text-sm text-gray-300 hover:bg-darkTertiary rounded transition">Cancel</button>
                        <button class="save-edit-btn px-3 py-1 bg-primary text-white text-sm rounded-lg hover:bg-primaryDark transition" data-section="skills">Save</button>
                    </div>
                </div>
            </div>
            
            <!-- Education Section -->
            <div class="bg-darkSecondary rounded-lg p-4 mb-4 shadow-sm section-card">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="font-medium text-white">Education</h3>
                    <button class="edit-section-btn text-primary hover:bg-darkTertiary p-1 rounded-full transition" data-section="education">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div id="educationList">
                    <div>
                        <h4 class="font-medium text-white">Bachelor of Science in Computer Science</h4>
                        <p class="text-gray-300 text-sm">University of Technology</p>
                        <p class="text-gray-400 text-xs">2014 - 2018</p>
                    </div>
                </div>
                
                <!-- Education Edit Form (Hidden initially) -->
                <div id="educationEditForm" class="hidden mt-3 fade-in">
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium mb-1 text-white">Degree</label>
                            <input type="text" id="eduDegreeInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm bg-darkTertiary border-darkTertiary" placeholder="e.g. Bachelor of Science">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1 text-white">Field of Study</label>
                            <input type="text" id="eduFieldInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm bg-darkTertiary border-darkTertiary" placeholder="e.g. Computer Science">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1 text-white">School</label>
                            <input type="text" id="eduSchoolInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm bg-darkTertiary border-darkTertiary" placeholder="e.g. University of Technology">
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <label class="block text-sm font-medium mb-1 text-white">Start Year</label>
                                <input type="number" id="eduStartInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm bg-darkTertiary border-darkTertiary" placeholder="e.g. 2014">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1 text-white">End Year</label>
                                <input type="number" id="eduEndInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm bg-darkTertiary border-darkTertiary" placeholder="e.g. 2018">
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-end mt-3 space-x-2">
                        <button class="cancel-edit-btn px-3 py-1 text-sm text-gray-300 hover:bg-darkTertiary rounded transition">Cancel</button>
                        <button class="save-edit-btn px-3 py-1 bg-primary text-white text-sm rounded-lg hover:bg-primaryDark transition" data-section="education">Save</button>
                    </div>
                </div>
            </div>
            
            <!-- Connections Section -->
            <div class="bg-darkSecondary rounded-lg p-4 mb-4 shadow-sm section-card">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="font-medium text-white">Connections</h3>
                    <a href="search.html" id="viewAllConnectionsBtn" class="text-primary text-sm font-medium hover:underline">
                        Find More
                    </a>
                </div>
                <div id="connectionsList" class="grid grid-cols-2 gap-3">
                    <!-- Connections will be populated by JavaScript -->
                </div>
                
                <!-- Empty Connections State (Hidden initially) -->
                <div id="emptyConnectionsState" class="hidden py-4 text-center">
                    <div class="w-12 h-12 bg-darkTertiary rounded-full mx-auto flex items-center justify-center mb-2 pulse-animation">
                        <i class="fas fa-users text-gray-400"></i>
                    </div>
                    <p class="text-gray-300 text-sm mb-2">No connections yet</p>
                    <a href="search.html" class="text-primary text-sm font-medium hover:underline">Find professionals to connect with</a>
                </div>
            </div>

            <!-- Business Networking Insights -->
            <div class="bg-darkSecondary rounded-lg p-4 mb-4 shadow-sm section-card">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="font-medium text-white">Business Networking</h3>
                    <span class="text-xs text-gray-400">Based on your quiz</span>
                </div>
                <div class="space-y-3">
                    <div>
                        <div class="flex justify-between mb-1">
                            <span class="text-sm text-gray-300">Growth Potential</span>
                            <div id="businessPotentialStars" class="flex space-x-1">
                                <i class="fas fa-star text-accent text-xs"></i>
                                <i class="fas fa-star text-accent text-xs"></i>
                                <i class="fas fa-star text-accent text-xs"></i>
                                <i class="fas fa-star text-gray-600 text-xs"></i>
                                <i class="fas fa-star text-gray-600 text-xs"></i>
                            </div>
                        </div>
                    </div>
                    <div>
                        <span class="text-sm text-gray-300">Focus Sectors</span>
                        <div class="flex flex-wrap mt-1" id="focusSectorsList">
                            <span class="inline-block px-2 py-1 bg-primary/10 text-primary rounded text-xs mr-1 mb-1">Technology</span>
                            <span class="inline-block px-2 py-1 bg-primary/10 text-primary rounded text-xs mr-1 mb-1">Finance</span>
                        </div>
                    </div>
                    <a href="#" class="text-primary text-sm font-medium flex items-center hover:underline">
                        <span>View full network insights</span>
                        <i class="fas fa-chevron-right ml-1 text-xs"></i>
                    </a>
                </div>
            </div>

            <!-- Sign Out Button -->
            <button id="signOutButton" class="w-full py-3 bg-darkSecondary text-danger rounded-lg shadow-sm flex justify-center items-center mb-6 hover:bg-darkTertiary transition duration-300 btn">
                <i class="fas fa-sign-out-alt mr-2"></i> Sign Out
            </button>
        </div>
        
        <!-- Edit Profile Panel (Hidden initially) -->
        <div id="editProfilePanel" class="fixed inset-0 bg-black/70 z-50 hidden">
            <div class="absolute right-0 top-0 bottom-0 bg-darkBg p-4 w-full max-w-sm shadow-lg transform transition-transform duration-300 ease-out overflow-y-auto">
                <div class="flex justify-between items-center mb-4 sticky top-0 bg-darkBg pt-2 pb-3 z-10">
                    <h2 class="text-xl font-bold text-white">Edit Profile</h2>
                    <button id="closeEditProfileBtn" class="text-gray-300 p-2 hover:bg-darkTertiary rounded-full transition">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="space-y-6">
                    <!-- Profile Image Upload -->
                    <div class="text-center">
                        <img id="imagePreview" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=200&q=80" alt="Profile photo preview" class="image-preview mb-3">
                        <div class="file-input-container">
                            <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primaryDark transition duration-300 btn">
                                <i class="fas fa-camera mr-2"></i> Change Photo
                            </button>
                            <input type="file" id="profileImageInput" class="file-input" accept="image/*">
                        </div>
                    </div>
                    
                    <!-- Basic Information Form -->
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-1 text-white">Full Name*</label>
                            <input type="text" id="fullNameInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-base bg-darkTertiary border-darkTertiary" placeholder="e.g. John Doe">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1 text-white">Professional Title*</label>
                            <input type="text" id="titleInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-base bg-darkTertiary border-darkTertiary" placeholder="e.g. Product Manager">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1 text-white">Company</label>
                            <input type="text" id="companyInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-base bg-darkTertiary border-darkTertiary" placeholder="e.g. TechCorp">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1 text-white">Industry</label>
                            <select id="industryInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-base bg-darkTertiary border-darkTertiary">
                                <option value="">Select Industry</option>
                                <option value="Technology">Technology</option>
                                <option value="Finance">Finance</option>
                                <option value="Healthcare">Healthcare</option>
                                <option value="Education">Education</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Consulting">Consulting</option>
                                <option value="Retail">Retail</option>
                                <option value="Manufacturing">Manufacturing</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1 text-white">Location</label>
                            <input type="text" id="locationInput" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-base bg-darkTertiary border-darkTertiary" placeholder="e.g. New York, NY">
                        </div>
                    </div>
                    
                    <div class="pt-4 flex justify-end">
                        <button id="saveProfileBtn" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-primaryDark transition duration-300 btn">
                            Save Changes
                        </button>
                    </div>
                    <p class="text-xs text-gray-400 text-center mt-2">Fields marked with * are required</p>
                </div>
            </div>
        </div>
        
        <!-- Profile Image Upload Modal (Hidden initially) -->
        <div id="imageUploadModal" class="fixed inset-0 flex items-center justify-center z-50 hidden">
            <div class="absolute inset-0 bg-black opacity-70"></div>
            <div class="bg-darkSecondary rounded-lg p-6 max-w-md w-full relative z-10 fade-in">
                <div class="text-center">
                    <h2 class="text-xl font-bold mb-4 text-white">Update Profile Photo</h2>
                    
                    <img id="uploadImagePreview" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=200&q=80" alt="Preview" class="image-preview mb-4">
                    
                    <div class="file-input-container mb-6">
                        <button class="bg-darkTertiary text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition duration-300 btn">
                            <i class="fas fa-upload mr-2"></i> Choose Photo
                        </button>
                        <input type="file" id="uploadProfileImageInput" class="file-input" accept="image/*">
                    </div>
                    
                    <div class="flex justify-end space-x-3">
                        <button id="cancelProfileImageBtn" class="px-4 py-2 border border-darkTertiary rounded-lg text-gray-300 hover:bg-darkTertiary transition duration-300 btn">
                            Cancel
                        </button>
                        <button id="saveProfileImageBtn" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primaryDark transition duration-300 btn">
                            Save Photo
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sign Out Confirmation Modal -->
        <div id="signOutModal" class="fixed inset-0 bg-black/70 z-50 hidden flex items-center justify-center">
            <div class="bg-darkSecondary rounded-lg p-6 max-w-xs w-full relative z-10 fade-in">
                <div class="text-center">
                    <div class="w-16 h-16 bg-danger/10 rounded-full mx-auto flex items-center justify-center mb-4">
                        <i class="fas fa-sign-out-alt text-danger text-2xl"></i>
                    </div>
                    <h2 class="text-xl font-bold mb-2 text-white">Sign Out</h2>
                    <p class="text-gray-300 mb-6">Are you sure you want to sign out of your account?</p>
                    
                    <div class="flex justify-center space-x-4">
                        <button id="cancelSignOutBtn" class="px-6 py-2 border border-darkTertiary rounded-lg text-gray-300 hover:bg-darkTertiary transition duration-300 btn">
                            Cancel
                        </button>
                        <button id="confirmSignOutBtn" class="bg-danger text-white px-6 py-2 rounded-lg hover:bg-red-700 transition duration-300 btn">
                            Sign Out
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div id="toastNotification" class="toast">
            Profile updated successfully
        </div>

        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 left-0 right-0 p-3 flex justify-around bg-darkSecondary border-t border-darkTertiary bottom-nav">
            <a href="index.html" class="flex flex-col items-center">
                <i class="fas fa-chart-line text-xl text-gray-500 nav-icon"></i>
                <span class="text-xs mt-1 text-gray-500">Analytics</span>
            </a>
            <a href="search.html" class="flex flex-col items-center">
                <i class="fas fa-search text-xl text-gray-500 nav-icon"></i>
                <span class="text-xs mt-1 text-gray-500">Find</span>
            </a>
            <a href="notifications.html" class="flex flex-col items-center relative">
                <i class="fas fa-bell text-xl text-gray-500 nav-icon"></i>
                <span id="navNotificationBadge" class="notification-badge hidden">0</span>
                <span class="text-xs mt-1 text-gray-500">Requests</span>
            </a>
            <a href="profile.html" class="flex flex-col items-center">
                <i class="fas fa-user text-xl text-primary nav-icon active"></i>
                <span class="text-xs mt-1 text-primary">Profile</span>
            </a>
        </nav>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const authCheck = document.getElementById('authCheck');
            const loadingState = document.getElementById('loadingState');
            const profileContent = document.getElementById('profileContent');
            const editProfileBtn = document.getElementById('editProfileBtn');
            const settingsBtn = document.getElementById('settingsBtn');
            const notificationsBtn = document.getElementById('notificationsBtn');
            const notificationBadge = document.getElementById('notificationBadge');
            const navNotificationBadge = document.getElementById('navNotificationBadge');
            const shareProfileBtn = document.getElementById('shareProfileBtn');
            const editProfileImageBtn = document.getElementById('editProfileImageBtn');
            const toastNotification = document.getElementById('toastNotification');
            const profileCompletionBar = document.getElementById('profileCompletionBar');
            const profileCompletionPercent = document.getElementById('profileCompletionPercent');
            const profileCompletionHint = document.getElementById('profileCompletionHint');
            const viewAllConnectionsBtn = document.getElementById('viewAllConnectionsBtn');
            const connectionsList = document.getElementById('connectionsList');
            const emptyConnectionsState = document.getElementById('emptyConnectionsState');
            const signOutButton = document.getElementById('signOutButton');
            const signOutModal = document.getElementById('signOutModal');
            const cancelSignOutBtn = document.getElementById('cancelSignOutBtn');
            const confirmSignOutBtn = document.getElementById('confirmSignOutBtn');
            const focusSectorsList = document.getElementById('focusSectorsList');
            
            // Edit Profile Panel Elements
            const editProfilePanel = document.getElementById('editProfilePanel');
            const closeEditProfileBtn = document.getElementById('closeEditProfileBtn');
            const imagePreview = document.getElementById('imagePreview');
            const profileImageInput = document.getElementById('profileImageInput');
            const fullNameInput = document.getElementById('fullNameInput');
            const titleInput = document.getElementById('titleInput');
            const companyInput = document.getElementById('companyInput');
            const industryInput = document.getElementById('industryInput');
            const locationInput = document.getElementById('locationInput');
            const saveProfileBtn = document.getElementById('saveProfileBtn');
            
            // Image Upload Modal Elements
            const imageUploadModal = document.getElementById('imageUploadModal');
            const uploadImagePreview = document.getElementById('uploadImagePreview');
            const uploadProfileImageInput = document.getElementById('uploadProfileImageInput');
            const cancelProfileImageBtn = document.getElementById('cancelProfileImageBtn');
            const saveProfileImageBtn = document.getElementById('saveProfileImageBtn');
            
            // Current state variables
            let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
            let tempImageDataUrl = null;
            
            // Helper functions for user data management
            function getAllUsers() {
                return JSON.parse(localStorage.getItem('proconnect_users') || '[]');
            }
            
            function saveUsers(users) {
                localStorage.setItem('proconnect_users', JSON.stringify(users));
            }
            
            function updateCurrentUserInSystem() {
                if (!currentUser || !currentUser.id) return false;
                
                const users = getAllUsers();
                const index = users.findIndex(u => u.id === currentUser.id);
                
                if (index !== -1) {
                    users[index] = currentUser;
                    saveUsers(users);
                    // Update current user in local storage
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    return true;
                }
                
                return false;
            }
            
            // Check for pending connection requests
            function checkForPendingRequests() {
                if (!currentUser) return;
                
                const pendingRequests = currentUser.pendingRequests || [];
                const requestCount = pendingRequests.length;
                
                if (requestCount > 0) {
                    // Update notification badges
                    notificationBadge.textContent = requestCount;
                    notificationBadge.classList.remove('hidden');
                    
                    navNotificationBadge.textContent = requestCount;
                    navNotificationBadge.classList.remove('hidden');
                } else {
                    notificationBadge.classList.add('hidden');
                    navNotificationBadge.classList.add('hidden');
                }
            }
            
            // Initialize UI
            if (!currentUser) {
                // Show auth check message and hide profile content
                authCheck.classList.remove('hidden');
                profileContent.classList.add('hidden');
                loadingState.classList.add('hidden');
                return;
            } else {
                // Show loading initially
                authCheck.classList.add('hidden');
                loadingState.classList.remove('hidden');
                profileContent.classList.add('hidden');
                
                // Simulate loading delay
                setTimeout(() => {
                    loadingState.classList.add('hidden');
                    loadProfile();
                    profileContent.classList.remove('hidden');
                    
                    // Check for pending connection requests
                    checkForPendingRequests();
                }, 800);
            }
            
            // Load current user's profile
            function loadProfile() {
                // Set basic profile info
                document.getElementById('profileName').textContent = currentUser.fullName || "Your Name";
                
                // Set profile title (role at company)
                let title = "";
                if (currentUser.currentRole) {
                    title = currentUser.currentRole;
                    if (currentUser.company) {
                        title += " at " + currentUser.company;
                    }
                }
                document.getElementById('profileTitle').textContent = title;
                
                // Set profile location
                document.getElementById('profileLocation').textContent = currentUser.location || "Add your location";
                if (!currentUser.location) {
                    document.getElementById('profileLocation').innerHTML = '<i class="fas fa-map-marker-alt mr-1"></i>Add your location';
                } else {
                    document.getElementById('profileLocation').innerHTML = `<i class="fas fa-map-marker-alt mr-1"></i>${currentUser.location}`;
                }
                
                // Set profile image
                if (currentUser.profileImage) {
                    document.getElementById('profileImage').src = currentUser.profileImage;
                    imagePreview.src = currentUser.profileImage;
                    uploadImagePreview.src = currentUser.profileImage;
                }
                
                // Set about content
                document.getElementById('aboutContent').textContent = currentUser.about || "Add a description about yourself";
                document.getElementById('aboutTextarea').value = currentUser.about || "";
                
                // Set skills
                let skillsHtml = "";
                if (currentUser.skills && currentUser.skills.length > 0) {
                    let skillsArray = currentUser.skills;
                    if (typeof skillsArray === 'string') {
                        skillsArray = skillsArray.split(',').map(s => s.trim());
                    }
                    
                    skillsHtml = skillsArray.map(skill => {
                        return `<span class="skill-badge">${skill}</span>`;
                    }).join('');
                    
                    document.getElementById('skillsInput').value = skillsArray.join(', ');
                }
                document.getElementById('skillsList').innerHTML = skillsHtml || '<span class="text-gray-400 text-sm">Add your skills</span>';
                
                // Set experience
                let experienceHtml = "";
                if (currentUser.experience && currentUser.experience.length > 0) {
                    experienceHtml = currentUser.experience.map((exp, index) => {
                        const isLast = index === currentUser.experience.length - 1;
                        return `
                            <div class="${!isLast ? 'mb-3 pb-3 border-b border-darkTertiary' : ''}">
                                <h4 class="font-medium text-white">${exp.title}</h4>
                                <p class="text-gray-300 text-sm">${exp.company}</p>
                                <p class="text-gray-400 text-xs">${exp.startDate} - ${exp.endDate || 'Present'}</p>
                                ${exp.description ? `<p class="text-gray-300 text-sm mt-1">${exp.description}</p>` : ''}
                            </div>
                        `;
                    }).join('');
                }
                document.getElementById('experienceList').innerHTML = experienceHtml || '<span class="text-gray-400 text-sm">Add your work experience</span>';
                
                // Set education
                let educationHtml = "";
                if (currentUser.education && currentUser.education.length > 0) {
                    educationHtml = currentUser.education.map((edu, index) => {
                        const isLast = index === currentUser.education.length - 1;
                        const degree = edu.degree + (edu.fieldOfStudy ? ' in ' + edu.fieldOfStudy : '');
                        return `
                            <div class="${!isLast ? 'mb-3 pb-3 border-b border-darkTertiary' : ''}">
                                <h4 class="font-medium text-white">${degree}</h4>
                                <p class="text-gray-300 text-sm">${edu.school}</p>
                                <p class="text-gray-400 text-xs">${edu.startYear} - ${edu.endYear || 'Present'}</p>
                            </div>
                        `;
                    }).join('');
                }
                document.getElementById('educationList').innerHTML = educationHtml || '<span class="text-gray-400 text-sm">Add your education</span>';
                
                // Set connections
                loadConnections();
                
                // Set networking insights section based on quiz data
                updateNetworkingInsights();
                
                // Calculate and update profile completion
                updateProfileCompletion();
                
                // Set edit profile panel input values
                fullNameInput.value = currentUser.fullName || "";
                titleInput.value = currentUser.currentRole || "";
                companyInput.value = currentUser.company || "";
                locationInput.value = currentUser.location || "";
                
                // Set industry dropdown value
                if (currentUser.industry) {
                    const option = Array.from(industryInput.options).find(opt => opt.value === currentUser.industry);
                    if (option) {
                        option.selected = true;
                    }
                }
            }
            
            // Update networking insights section based on quiz answers
            function updateNetworkingInsights() {
                // Check if user has networkingProfile data
                if (!currentUser.networkingProfile) return;
                
                // Update potential stars based on importance + approach
                const importance = currentUser.networkingProfile.importance;
                const approach = currentUser.networkingProfile.approach;
                let stars = 3; // Default
                
                if (importance === 'critical' && approach === 'proactive') {
                    stars = 5;
                } else if ((importance === 'critical' || importance === 'very') && 
                          (approach === 'proactive' || approach === 'opportunistic')) {
                    stars = 4;
                } else if (importance === 'not' || approach === 'avoid') {
                    stars = 2;
                }
                
                // Update stars display
                const starsHtml = Array(5).fill(0).map((_, i) => {
                    return i < stars 
                        ? '<i class="fas fa-star text-accent text-xs"></i>' 
                        : '<i class="fas fa-star text-gray-600 text-xs"></i>';
                }).join('');
                document.getElementById('businessPotentialStars').innerHTML = starsHtml;
                
                // Update focus sectors
                if (currentUser.networkingProfile.sectors && currentUser.networkingProfile.sectors.length > 0) {
                    const sectorNames = {
                        'tech': 'Technology',
                        'finance': 'Finance',
                        'healthcare': 'Healthcare',
                        'ecommerce': 'E-commerce',
                        'marketing': 'Marketing',
                        'manufacturing': 'Manufacturing',
                        'professional': 'Services',
                        'real-estate': 'Real Estate'
                    };
                    
                    // Get top 3 sectors
                    const topSectors = currentUser.networkingProfile.sectors.slice(0, 3);
                    const sectorsHtml = topSectors.map(sector => {
                        const sectorName = sectorNames[sector] || sector;
                        return `<span class="inline-block px-2 py-1 bg-primary/10 text-primary rounded text-xs mr-1 mb-1">${sectorName}</span>`;
                    }).join('');
                    
                    // Update DOM
                    if (focusSectorsList) {
                        focusSectorsList.innerHTML = sectorsHtml;
                    }
                }
            }
            
            // Load connections
            function loadConnections() {
                if (!currentUser.connections || currentUser.connections.length === 0) {
                    // Show empty state
                    connectionsList.classList.add('hidden');
                    emptyConnectionsState.classList.remove('hidden');
                    return;
                }
                
                // Hide empty state
                connectionsList.classList.remove('hidden');
                emptyConnectionsState.classList.add('hidden');
                
                // Get all users to find connection details
                const allUsers = getAllUsers();
                
                // Get connections with full user data
                const connectionsWithUserData = currentUser.connections.map(connId => {
                    const user = allUsers.find(u => u.id === connId);
                    return user ? {
                        id: user.id,
                        name: user.fullName,
                        title: user.currentRole,
                        profileImage: user.profileImage
                    } : null;
                }).filter(conn => conn !== null);
                
                // Limit to 4 connections
                const connectionsToShow = connectionsWithUserData.slice(0, 4);
                
                // Create HTML
                let connectionsHtml = connectionsToShow.map(conn => {
                    return `
                        <div class="flex flex-col items-center text-center">
                            <img src="${conn.profileImage || 'https://via.placeholder.com/50'}" class="w-12 h-12 rounded-full object-cover mb-1" alt="${conn.name}">
                            <p class="text-sm font-medium truncate w-full text-white">${conn.name}</p>
                            <p class="text-xs text-gray-400 truncate w-full">${conn.title || ''}</p>
                        </div>
                    `;
                }).join('');
                
                connectionsList.innerHTML = connectionsHtml;
            }
            
            // Calculate profile completion percentage
            function updateProfileCompletion() {
                let totalScore = 0;
                let hint = "";
                
                // Basic profile (30%)
                if (currentUser.fullName && currentUser.fullName.trim() !== "") totalScore += 5;
                if (currentUser.profileImage) totalScore += 5;
                if (currentUser.currentRole && currentUser.currentRole.trim() !== "") totalScore += 5;
                if (currentUser.company && currentUser.company.trim() !== "") totalScore += 5;
                if (currentUser.location && currentUser.location.trim() !== "") totalScore += 5;
                if (currentUser.industry && currentUser.industry.trim() !== "") totalScore += 5;
                
                // About (20%)
                if (currentUser.about) {
                    if (currentUser.about.length < 50) {
                        totalScore += 10;
                        if (!hint) hint = "Expand your about section for a better profile";
                    } else {
                        totalScore += 20;
                    }
                } else {
                    if (!hint) hint = "Add an about section to improve your profile";
                }
                
                // Skills (20%)
                if (currentUser.skills) {
                    let skillsCount = 0;
                    if (typeof currentUser.skills === 'string') {
                        skillsCount = currentUser.skills.split(',').filter(s => s.trim() !== "").length;
                    } else if (Array.isArray(currentUser.skills)) {
                        skillsCount = currentUser.skills.length;
                    }
                    
                    if (skillsCount === 0) {
                        if (!hint) hint = "Add your skills to improve your profile";
                    } else if (skillsCount < 3) {
                        totalScore += 10;
                        if (!hint) hint = "Add more skills to improve your profile";
                    } else {
                        totalScore += 20;
                    }
                } else {
                    if (!hint) hint = "Add your skills to improve your profile";
                }
                
                // Experience (20%)
                if (currentUser.experience && currentUser.experience.length > 0) {
                    totalScore += Math.min(currentUser.experience.length * 10, 20);
                } else {
                    if (!hint) hint = "Add your work experience to improve your profile";
                }
                
                // Education (10%)
                if (currentUser.education && currentUser.education.length > 0) {
                    totalScore += 10;
                } else {
                    if (!hint) hint = "Add your education to complete your profile";
                }
                
                // Update UI
                profileCompletionPercent.textContent = totalScore + '%';
                profileCompletionBar.style.width = totalScore + '%';
                
                // Update hint if profile is complete
                if (totalScore >= 90) {
                    hint = "Your profile is looking great!";
                }
                
                profileCompletionHint.textContent = hint;
            }
            
            // Show toast notification
            function showToast(message) {
                toastNotification.textContent = message;
                toastNotification.style.opacity = 1;
                
                setTimeout(() => {
                    toastNotification.style.opacity = 0;
                }, 3000);
            }
            
            // Function to handle file selection for profile image
            function handleProfileImageSelect(fileInput, previewElement) {
                const file = fileInput.files[0];
                if (!file) return;
                
                // Validate file type
                if (!file.type.startsWith('image/')) {
                    showToast('Please select an image file');
                    return;
                }
                
                // Validate file size (5MB max)
                if (file.size > 5 * 1024 * 1024) {
                    showToast('Image size should be less than 5MB');
                    return;
                }
                
                // Create a FileReader to read the image
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    // Preview the image
                    previewElement.src = e.target.result;
                    
                    // Store data URL for later use
                    tempImageDataUrl = e.target.result;
                };
                
                reader.readAsDataURL(file);
            }
            
            // Event Listeners
            
            // Settings Button - Navigate to settings page 
            settingsBtn.addEventListener('click', function(e) {
                // Navigation happens through the <a> tag href
            });
            
            // Notifications Button
            notificationsBtn.addEventListener('click', function(e) {
                // Navigation happens through the <a> tag href
            });
            
            // Sign Out Button - Show confirmation modal
            signOutButton.addEventListener('click', function() {
                signOutModal.classList.remove('hidden');
            });
            
            // Cancel Sign Out
            cancelSignOutBtn.addEventListener('click', function() {
                signOutModal.classList.add('hidden');
            });
            
            // Confirm Sign Out
            confirmSignOutBtn.addEventListener('click', function() {
                // Sign out user
                localStorage.removeItem('currentUser');
                showToast('Signing out...');
                
                // Redirect to login page after a brief delay
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 1500);
            });
            
            // Edit Profile Button
            editProfileBtn.addEventListener('click', function() {
                // Show edit profile panel
                editProfilePanel.classList.remove('hidden');
                editProfilePanel.querySelector('.absolute').classList.add('slide-in');
                
                // Set form values to current user data
                fullNameInput.value = currentUser.fullName || "";
                titleInput.value = currentUser.currentRole || "";
                companyInput.value = currentUser.company || "";
                locationInput.value = currentUser.location || "";
                
                // Set industry dropdown value
                if (currentUser.industry) {
                    const option = Array.from(industryInput.options).find(opt => opt.value === currentUser.industry);
                    if (option) {
                        option.selected = true;
                    }
                }
                
                // Set profile image preview
                if (currentUser.profileImage) {
                    imagePreview.src = currentUser.profileImage;
                }
            });
            
            // Close Edit Profile Panel
            closeEditProfileBtn.addEventListener('click', function() {
                const panelContent = editProfilePanel.querySelector('.absolute');
                panelContent.classList.remove('slide-in');
                panelContent.classList.add('slide-out');
                
                // Reset temp image data
                tempImageDataUrl = null;
                
                setTimeout(() => {
                    panelContent.classList.remove('slide-out');
                    editProfilePanel.classList.add('hidden');
                }, 300);
            });
            
            // Save Profile Button
            saveProfileBtn.addEventListener('click', function() {
                // Validate required fields
                if (!fullNameInput.value.trim()) {
                    showToast('Full name is required');
                    fullNameInput.focus();
                    return;
                }
                
                if (!titleInput.value.trim()) {
                    showToast('Professional title is required');
                    titleInput.focus();
                    return;
                }
                
                // Update user data
                currentUser.fullName = fullNameInput.value.trim();
                currentUser.currentRole = titleInput.value.trim();
                currentUser.company = companyInput.value.trim();
                currentUser.industry = industryInput.value;
                currentUser.location = locationInput.value.trim();
                
                // Save profile image if changed
                if (tempImageDataUrl) {
                    currentUser.profileImage = tempImageDataUrl;
                    // Update all previews
                    document.getElementById('profileImage').src = tempImageDataUrl;
                    uploadImagePreview.src = tempImageDataUrl;
                    tempImageDataUrl = null;
                }
                
                // Update user in the system
                updateCurrentUserInSystem();
                
                // Update UI
                document.getElementById('profileName').textContent = currentUser.fullName;
                
                // Update profile title
                let title = currentUser.currentRole;
                if (currentUser.company) {
                    title += " at " + currentUser.company;
                }
                document.getElementById('profileTitle').textContent = title;
                
                // Update location
                if (currentUser.location) {
                    document.getElementById('profileLocation').innerHTML = `<i class="fas fa-map-marker-alt mr-1"></i>${currentUser.location}`;
                } else {
                    document.getElementById('profileLocation').innerHTML = '<i class="fas fa-map-marker-alt mr-1"></i>Add your location';
                }
                
                // Update profile completion
                updateProfileCompletion();
                
                // Close edit profile panel
                const panelContent = editProfilePanel.querySelector('.absolute');
                panelContent.classList.remove('slide-in');
                panelContent.classList.add('slide-out');
                
                setTimeout(() => {
                    panelContent.classList.remove('slide-out');
                    editProfilePanel.classList.add('hidden');
                }, 300);
                
                // Show success message
                showToast('Profile updated successfully');
            });
            
            // Profile Image Input Change
            profileImageInput.addEventListener('change', function() {
                handleProfileImageSelect(this, imagePreview);
            });
            
            // Edit Profile Image Button
            editProfileImageBtn.addEventListener('click', function() {
                // Show image upload modal
                imageUploadModal.classList.remove('hidden');
                
                // Set preview image to current profile image
                if (currentUser.profileImage) {
                    uploadImagePreview.src = currentUser.profileImage;
                }
            });
            
            // Upload Profile Image Input Change
            uploadProfileImageInput.addEventListener('change', function() {
                handleProfileImageSelect(this, uploadImagePreview);
            });
            
            // Cancel Profile Image Button
            cancelProfileImageBtn.addEventListener('click', function() {
                // Hide image upload modal
                imageUploadModal.classList.add('hidden');
                
                // Reset temp image
                tempImageDataUrl = null;
            });
            
            // Save Profile Image Button
            saveProfileImageBtn.addEventListener('click', function() {
                if (!tempImageDataUrl) {
                    showToast('Please select an image first');
                    return;
                }
                
                // Update user data
                currentUser.profileImage = tempImageDataUrl;
                
                // Update user in the system
                updateCurrentUserInSystem();
                
                // Update UI
                document.getElementById('profileImage').src = currentUser.profileImage;
                imagePreview.src = currentUser.profileImage;
                
                // Reset temp image
                tempImageDataUrl = null;
                
                // Hide image upload modal
                imageUploadModal.classList.add('hidden');
                
                // Update profile completion
                updateProfileCompletion();
                
                // Show success message
                showToast('Profile photo updated');
            });
            
            // Edit section buttons
            const editSectionBtns = document.querySelectorAll('.edit-section-btn');
            
            editSectionBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    const formId = section + 'EditForm';
                    
                    // Show edit form
                    document.getElementById(formId).classList.remove('hidden');
                });
            });
            
            // Cancel edit buttons
            const cancelEditBtns = document.querySelectorAll('.cancel-edit-btn');
            
            cancelEditBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Find the parent form
                    const form = this.closest('[id$="EditForm"]');
                    form.classList.add('hidden');
                });
            });
            
            // Save edit buttons
            const saveEditBtns = document.querySelectorAll('.save-edit-btn');
            
            saveEditBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    
                    // Get form data and update profile
                    if (section === 'about') {
                        const aboutText = document.getElementById('aboutTextarea').value.trim();
                        currentUser.about = aboutText;
                        document.getElementById('aboutContent').textContent = aboutText;
                    } else if (section === 'skills') {
                        const skillsText = document.getElementById('skillsInput').value.trim();
                        const skillsArray = skillsText.split(',').map(s => s.trim()).filter(s => s !== "");
                        
                        currentUser.skills = skillsArray;
                        
                        // Update skills display
                        let skillsHtml = skillsArray.map(skill => {
                            return `<span class="skill-badge">${skill}</span>`;
                        }).join('');
                        
                        document.getElementById('skillsList').innerHTML = skillsHtml || '<span class="text-gray-400 text-sm">Add your skills</span>';
                    } else if (section === 'experience') {
                        // Get form values
                        const title = document.getElementById('expTitleInput').value.trim();
                        const company = document.getElementById('expCompanyInput').value.trim();
                        const startDate = document.getElementById('expStartInput').value;
                        const endDate = document.getElementById('expEndInput').value;
                        const isCurrent = document.getElementById('expCurrentInput').checked;
                        const description = document.getElementById('expDescriptionInput').value.trim();
                        
                        if (!title || !company || !startDate) {
                            showToast("Please fill in the required fields");
                            return;
                        }
                        
                        // Format dates
                        const formattedStartDate = startDate ? formatMonthYear(startDate) : '';
                        const formattedEndDate = isCurrent ? null : (endDate ? formatMonthYear(endDate) : '');
                        
                        // Create new experience object
                        const newExperience = {
                            title,
                            company,
                            startDate: formattedStartDate,
                            endDate: formattedEndDate,
                            description
                        };
                        
                        // Add to user profile
                        if (!currentUser.experience) {
                            currentUser.experience = [];
                        }
                        
                        currentUser.experience.unshift(newExperience); // Add to beginning of array
                        
                        // Update experience display
                        let experienceHtml = currentUser.experience.map((exp, index) => {
                            const isLast = index === currentUser.experience.length - 1;
                            return `
                                <div class="${!isLast ? 'mb-3 pb-3 border-b border-darkTertiary' : ''}">
                                    <h4 class="font-medium text-white">${exp.title}</h4>
                                    <p class="text-gray-300 text-sm">${exp.company}</p>
                                    <p class="text-gray-400 text-xs">${exp.startDate} - ${exp.endDate || 'Present'}</p>
                                    ${exp.description ? `<p class="text-gray-300 text-sm mt-1">${exp.description}</p>` : ''}
                                </div>
                            `;
                        }).join('');
                        
                        document.getElementById('experienceList').innerHTML = experienceHtml;
                        
                        // Reset form
                        document.getElementById('expTitleInput').value = '';
                        document.getElementById('expCompanyInput').value = '';
                        document.getElementById('expStartInput').value = '';
                        document.getElementById('expEndInput').value = '';
                        document.getElementById('expCurrentInput').checked = false;
                        document.getElementById('expDescriptionInput').value = '';
                        
                    } else if (section === 'education') {
                        // Get form values
                        const degree = document.getElementById('eduDegreeInput').value.trim();
                        const fieldOfStudy = document.getElementById('eduFieldInput').value.trim();
                        const school = document.getElementById('eduSchoolInput').value.trim();
                        const startYear = document.getElementById('eduStartInput').value.trim();
                        const endYear = document.getElementById('eduEndInput').value.trim();
                        
                        if (!degree || !school || !startYear) {
                            showToast("Please fill in the required fields");
                            return;
                        }
                        
                        // Create new education object
                        const newEducation = {
                            degree,
                            fieldOfStudy,
                            school,
                            startYear,
                            endYear
                        };
                        
                        // Add to user profile
                        if (!currentUser.education) {
                            currentUser.education = [];
                        }
                        
                        currentUser.education.unshift(newEducation); // Add to beginning of array
                        
                        // Update education display
                        let educationHtml = currentUser.education.map((edu, index) => {
                            const isLast = index === currentUser.education.length - 1;
                            const fullDegree = edu.degree + (edu.fieldOfStudy ? ' in ' + edu.fieldOfStudy : '');
                            return `
                                <div class="${!isLast ? 'mb-3 pb-3 border-b border-darkTertiary' : ''}">
                                    <h4 class="font-medium text-white">${fullDegree}</h4>
                                    <p class="text-gray-300 text-sm">${edu.school}</p>
                                    <p class="text-gray-400 text-xs">${edu.startYear} - ${edu.endYear || 'Present'}</p>
                                </div>
                            `;
                        }).join('');
                        
                        document.getElementById('educationList').innerHTML = educationHtml;
                        
                        // Reset form
                        document.getElementById('eduDegreeInput').value = '';
                        document.getElementById('eduFieldInput').value = '';
                        document.getElementById('eduSchoolInput').value = '';
                        document.getElementById('eduStartInput').value = '';
                        document.getElementById('eduEndInput').value = '';
                    }
                    
                    // Update user in the system
                    updateCurrentUserInSystem();
                    
                    // Hide form
                    const form = this.closest('[id$="EditForm"]');
                    form.classList.add('hidden');
                    
                    // Update profile completion
                    updateProfileCompletion();
                    
                    // Show success message
                    showToast("Profile updated successfully");
                });
            });
            
            // View all connections button
            viewAllConnectionsBtn.addEventListener('click', function() {
                // Navigation happens through the <a> tag href
            });
            
            // Share profile button
            shareProfileBtn.addEventListener('click', function() {
                // Simulate sharing functionality
                showToast("Profile link copied to clipboard");
            });
            
            // Format month and year
            function formatMonthYear(input) {
                const date = new Date(input);
                return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
            }
            
            // Check for connection requests periodically
            setInterval(checkForPendingRequests, 10000);
        });
    </script>
</body>
</html>
